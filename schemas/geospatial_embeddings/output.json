{
    "type" : "object",
    "properties": {
        "geometry" : {
            "type" : "object",
            "description": "Optional GeoJSON geometry object (Point, Polygon, MultiPolygon, or bounding box)",
            "oneOf": [
                {
                    "type": "object",
                    "description": "GeoJSON Point",
                    "required": ["type", "coordinates"],
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": ["Point"]
                        },
                        "coordinates": {
                            "type": "array",
                            "description": "[longitude, latitude]",
                            "items": {"type": "number"},
                            "minItems": 2,
                            "maxItems": 2
                        }
                    }
                },
                {
                    "type": "object",
                    "description": "GeoJSON Polygon",
                    "required": ["type", "coordinates"],
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": ["Polygon"]
                        },
                        "coordinates": {
                            "type": "array",
                            "description": "Array of linear rings (first is exterior, rest are holes)",
                            "items": {
                                "type": "array",
                                "items": {
                                    "type": "array",
                                    "items": {"type": "number"},
                                    "minItems": 2,
                                    "maxItems": 3
                                },
                                "minItems": 4
                            },
                            "minItems": 1
                        }
                    }
                },
                {
                    "type": "object",
                    "description": "GeoJSON MultiPolygon",
                    "required": ["type", "coordinates"],
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": ["MultiPolygon"]
                        },
                        "coordinates": {
                            "type": "array",
                            "description": "Array of Polygon coordinate arrays",
                            "items": {
                                "type": "array",
                                "items": {
                                    "type": "array",
                                    "items": {
                                        "type": "array",
                                        "items": {"type": "number"},
                                        "minItems": 2,
                                        "maxItems": 3
                                    },
                                    "minItems": 4
                                },
                                "minItems": 1
                            },
                            "minItems": 1
                        }
                    }
                },
                {
                    "type": "object",
                    "description": "Bounding box as GeoJSON-style object",
                    "required": ["bbox"],
                    "properties": {
                        "bbox": {
                            "type": "array",
                            "description": "[min_lon, min_lat, max_lon, max_lat]",
                            "items": {"type": "number"},
                            "minItems": 4,
                            "maxItems": 4
                        }
                    }
                }
            ]
        }
    }
}

